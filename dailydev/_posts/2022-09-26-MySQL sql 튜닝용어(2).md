---
layout: post
title: MySQL SQL 튜닝용어(2)
description: >
  2022-09-26-MySQL SQL 튜닝용어(2)
hide_description: false
category: dailydev
---

- Table of Contents
{:toc}

## 조인 연산방식 용어
다수의 테이블에서 필요한 데이터 끼리 결합할 때 조인(join) 방식을 사용한다. 조인은 동일한 열값 또는 키값을 기준으로 데이터를 논리적으로 연결한다. 조인의 종류에는 내부 조인(inner join), 왼쪽 외부 조인(left outer join), 오른쪽 외부 조인(right outer join), 전체 외부 조인(full outer join), 교차 조인(crossjoin), 자연 조인(natural join) 등이 있다.
다음은 예제로 사용할 테이블이다.

<br>학생 테이블 

| 학번 | 이름   | 성별 |  
|:--- | :--- | :--- | 
| 1 | 이순신 | 남 |
| 2 | 신사임당 | 여 |
| 3 | 유재석 | 남 |
| 4 | 강감찬 | 여 |

<br>지도교수 테이블 

| 학번 | 지도교수명 |  
|:--- | :--- |  
| 1 | 이황 |
| 2 | 새종대왕 | 
| 3 | 김유신 | 
| 99 | 이황 | 

## 내부 조인
내부 조인(inner join)은 교집합에 해당하는 방식이다.

![600x400](/assets/img/blog/SQL_INNER_JOIN.png)
<br>  내부 조인(inner join)
{:.figure}

학생 테이블과 지도교수 테이블에서 학번 열로 내부 조인 시 1,2,4의 학번이 출력 된다.

<br>SQL

```sql
SELECT  학생.학번, 학생.이름, 지도교수.교수명
  FROM  학생
  JOIN  지도교수
    ON  학생.학번 = 지도교수.학번
```
내부 조인을 명시적 조인으로 표현한 SQL문이다.  JOIN 절에 조인대상 테이블 ON 절에 조인할 비교조건을 작성한다.

<br>SQL

```sql
SELECT  학생.학번, 학생.이름, 지도교수.교수명
  FROM  학생, 지도교수
 WHERE  학생.학번 = 지도교수.학번
```
내부 조인을 암시적 조인으로 작성한 SQL문이다.

<br>결과

| 학번 | 이름   | 교수명 |  
|:--- | :--- | :--- | 
| 1 | 이순신 | 이황 |
| 2 | 신사임당 | 세종대왕 |
| 4 | 강감찬 | 김유신 |

## 왼쪽 외부 조인
왼쪽 외부 조인(left outer join)은 왼쪽 테이블(먼저 작성된 테이블) 기준으로 오른쪽 테이블(나중에 작성된 테이블)과 조인 시 조인 조건과 일치하지 않더라도 왼쪽 테이블의 결과는 최종 결과에 포함된다.

![600x400](/assets/img/blog/SQL_OUTER_JOIN.png)
<br>  외부 조인(outer join)
{:.figure}

<br>왼쪽 외부 조인 SQL

```sql
SELECT  학생.학번, 학생.이름, 지도교수.교수명
  FROM  학생, 지도교수
  LEFT  OUTER JOIN  지도교수
                ON  학생.학번 = 지도교수.학번
```

<br>결과
| 학번 | 이름   | 교수명 |  
|:--- | :--- | :--- | 
| 1 | 이순신 | 이황 |
| 2 | 신사임당 | 세종대왕 |
| 3 | 유재석 | NULL |
| 4 | 강감찬 | 김유신 |

## 오른쪽 외부 조인
오른쪽 외부 조인(right outer join)은 오른쪽 테이블(나중에 작성된 테이블) 기준으로 왼쪽 테이블(먼저 작성된 테이블)과 조인 하지만 조건과 일치하지 않더라도 오른쪽 테이블의 결과는 최종 결과에 포함된다.

<br>오른쪽 외부 조인 SQL

```sql
SELECT  학생.학번, 학생.이름, 지도교수.교수명
  FROM  학생, 지도교수
 RIGHT  OUTER JOIN  지도교수
                ON  학생.학번 = 지도교수.학번
```

<br>결과
| 학번 | 이름   | 교수명 |  
|:--- | :--- | :--- | 
| 1 | 이순신 | 이황 |
| 2 | 신사임당 | 세종대왕 |
| 3 | 유재석 | NULL |
| 99 | NULL | 이황 |

오른쪽 외부 조인과 왼쪽 외부 조인은 RIGHT LEFT와 테이블 순서만 바꾸면 되기 때문에 쉽게 변경할 수 있다. 사람은 인지적 특성상 왼쪽 -> 오른쪽을 정방향으로 인식하기 때문에 왼쪽 외부조인으로만 일관성 있는 SQL문을 작성하는 것이 유지보수, 관리측면에서 유리하다.

## 교차 조인
교차 조인(crossjoin)은 수학적 관점에서 봤을 때 데카르트 곱이라고하는 곱집합 개념이다. 즉 조인에 참여하는 테이블에서 발생할 수 있는 모든 조합을 찾아내어 반환한다. 학생 테이블과 지도교수를 교차조인하면 총 16개의 결과가 출력된다.

<br>교차 조인 SQL - 명시적

```sql
SELECT  학생.학번, 학생.이름, 
        지도교수.학번, 지도교수.교수명
  FROM  학생, 지도교수
 CROSS  JOIN  지도교수
```

<br>교차 조인 SQL - 암시적

```sql
SELECT  학생.학번, 학생.이름, 
        지도교수.학번, 지도교수.교수명
  FROM  학생, 지도교수
```

## 참고 문헌

[업무에 바로 쓰는 SQL 튜닝](http://www.yes24.com/Product/Goods/102382080)