---
layout: post
title: 자바8 함수형 프로그래밍
description: >
  자바8 함수형 프로그래밍
hide_description: false
category: dailydev
---


- Table of Contents
{:toc .large-only}

자바8이 등장하기 이전에는 멀티코어를 활용하기 어려웠다.
스레드를 사용하여야 하는데 이는 관리하기 어렵고 많은 문제가 발생할 수 있다.
자바8에서는 병렬실행을 새롭고 단순한 방식으로 접근 할 수 있다.
이 방식에는 몇가지 규칙이 있다.<br><br>
자바8에서 제공하는 새로운 기술<br>
- 스트림 API(병렬연산 지원, 멀티스레드를 사용할때 synchronized를 사용하지 않아도 된다.)<br>
- 메서드에 코드를 전달하는 기법(새롭고 간결한 방식으로 동작 파라미터화를 구현 할 수 있다.)<br>
- 인터페이스의 디폴트 메서드<br>
이러한 자바8 기법은 함수형 프로그래밍에서 위력을 발휘한다.

##자바8 이전과 자바8 이후

아래 코드는 사과 목록을 무게 순으로 정렬하는 코드이다.<br>
자바8 이전
```java
Collections.sort(inventory,new Comparator<Apple>(){
	public int compare(int a, int b){
    	return a.getWeight().compareTo(b.getWeight());
    }
});
```
자바8 이후 
```java
inventory.sort(comparing(Apple::getWeight));
```
자바8을 이용하면 이처럼 자연어에 더 가깝게 표현할 수 있다.

## 스트림 처리(stream processing)
스트림 = 한번에 한개씩 만들어지는 연속적인 데이터 항목들의 모임
자바8에는 java.util.stream 패키지에 스트림 API가 추가되었다.
스트림 API의 핵심은 우리가 하려는 작업을 고수준으로 추상화해서 일련의 스트림으로 만들어 
처리할 수 있다는 것이다. 또한 스트림 파이프라인을 이용해서 입력부분을 여러 cpu코어에 쉽게 할당할 수 있고
스레드를 사용하지 않고도 병렬성을 얻을 수 있다.


## 동작 파라미터화(behavior parameterization)로 메서드에 코드 전달하기
자바8이전에서는 메서드를 다른 메서드로 전달할 방법이 없었다.
객체를 만들어서 넘겨주는 방법도 있지만 이는 너무 복잡하며 기존 동작을 
단순하게 재활용한다는 측면에서도 맞지 않다.
자바8에서는 메서드를 다른 메서드의 인수로 넘겨주는 기능을 제공한다.
이러한 기능을 이론적으로 동작 파라미터화라고 부른다.

## 병렬성과 공유 가변 데이터
병렬성을 얻기 위해 스트림메서드로 전달하는 코드의 동작 방식을 조금 바꿔야한다.
스트림 메서드로 전달하는 코드는 다른 코드와 동시에 실행하더라도 안전하게 실행할 수 있는
코드를 만들려면 가변데이터에 접근하지 않아야한다.
이러한 함수를 순수함수, 부작용 없는 함수, 상태 없는 함수라 부른다.



