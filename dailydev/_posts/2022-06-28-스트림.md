---
layout: post
title: JAVA 스트림
description: >
  JAVA  스트림
hide_description: false
category: dailydev
---


- Table of Contents
{:toc .large-only}

스트림 API를 이용하면 컬렉션API와는 다른 방식으로 데이터를 처리할 수 있다.
컬렉션에서는 반복과정을 직접처리하는 외부 반복(external iteration)<br>
스트림 API에서는 라이브러리 내부에서 모든 데이터가 처리되는 내부 반복(internal iteration)이다.
스트림은 거대한 리스트를 처리할때 멀티코어 컴퓨터를 활용해서 병렬로 작업을 수행 할 수 있다.
<br>
자바8이전 외부반복 통화로 결과를 그룹화 하는 코드
```java
Map<Currency, List<Transaction>> transactionByCurrencies = new HashMap<>();
for (Transaction transaction : transactions) {
  if(transaction.getPrice()>1000){
    Currency currency = transaction.getCurrency();
    List<Transaction> transactionsForCurrency 
        = transactionsByCurrencies.get(currency);

    if(transactionsForCurrency == null) {
       transactionsForCurrency = new ArrayList<>();
       transactionByCurrencies.put(currency, transactionsForCurrency);
    }
    transactionsForCurrency.add(transaction);
  }    
}
```
자바8이후 내부반복
```java
Map<Currency, List<Transaction>> transactionsByCurrencies = transactions.stream()
  .filter((Transaction t) -> t.getPrice() > 1000)
  .collect(groupingBy(Transaction::getCurrency));
```

## 멀티스레딩 
이전자바 버전에서는 멀티스레딩을 구현하기 어려웠다.
멀티스레딩은 각각의 스레드가 동시에 공유된 데이터에 접근하고, 데이터를 갱신할 수 있다.
하지만 제어를 잘 하지 못하면 원치 않는 방식으로 데이터가 바뀔 수 있다.
synchronized를 활용하더라도 미묘한 버그가 발생하기 때문이다.
멀티스레딩이 순차적인 모델보다 다루기가 어려운 이유였다.
## 참고 문헌
[모던 자바 인 액션](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=200069290)
